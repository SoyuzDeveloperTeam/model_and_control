#include "CtrlWord.h" // Управляющие Слова
/*
  +--------------------------+
  | Контроль расхода топлива |
  +--------------------------+

  Info: Программа предназначена для контроля
        расхода топлива только в процессе
        ориентации.
        Программа состоит из двух частей:
            - контроль сигнала с БДУС1
            - контроль расхода
        Идеология контроля сигнала с БДУС1
        состоит в том, что в процессе ориентации
        (выполнении программных разворотов) не
        может быть скоростей больших 5 гр/с.
        Если программа в течении 15 с фиксирует
        скорость в любом канале больше 5 гр/с,
        то причиной может быть либо БДУС1, либо ДПО.
        Поэтому БЦВК формирует ПА (предпологаемую
        аварию) (cw_TA00[1]).
        В качестве оценки расхода топлива принят
        текущий расход на каждом 10-минутном интервале.

        Допуска на расход
        +------+---------------------------------+
        |      |         Допуск на расход        |
        |      +---------------------------------+
        | Тип  | Одиночный | Большие ск | Сцепка |
        |  ДПО |    Т К    | (3,5 гр/с) |  пр. 5 |
        +------+-----------+------------+--------+
        | ДПО-Б|     2     |      4     |    8   |
        +------+-----------+------------+--------+
        | ДПО-М|     2,5   |      5     |    10  |
        +------+-----------+------------+--------+

        Контроль ведется на каждом такте таймера БЦВК

        

  Misc: Блок-схемы находятся в файле A16_PKRT

*/

void A16_PKRT (void){

if(cw_c2[13]||cw_c2[14]||cw_c2[7]||cw_c10[2]||cw_c1[3-7,10,11]||
   cw_c6[10,15]||cw_c7[5,12]||cw_a4[1,2]==true)
        {
         // Метка "Мю"
         // N
        }

}

// Программа контроля углов
// Контроль углов производится с целью оценки динамики автоматического управления ТК
// с учетом углов, измеряемых моделью аппаратуры "КУРС", и структурно состоит
// из двух видов контроля:
// void konug_kuo - Контроль углов обзора (ПсиО и НюО)
// void konug_kki - Контроль крена измеряемого

void konug_kuo(){
 // Необходимым условием проведения этого контроля является одновременное наличие признаков
 // cw_a19[6]=1 и dyn_lsk2=1 (1), так как
 // - установка признака cw_a19[6]=1 свидетельствует, что есть надежные измерения углов Пси и Ню
 // - при dyn_lsk2=1 (ЛСК2=1) осуществляется коррекция базиса Т (ЛСК) по углам, измеряемым РТС "КУРС"
 // Контроль углов обзора заключается в анализе признака ГСО-3. Если при выполнении условия (1) признак ГСО-3
 // отсутствовал в течение 8 минут, то формируем ТА КУРС 07 "Отказ обзорных углов" и выставляем "Запрет углов обзора" (ЗУО)
 // на работающий комплект РТС "КУРС" - cw_a30[10]=1; если КУРС1 или cw_a30[15]=1 если КУРС2
}

void konug_kki(){
 // Контроль углов Гамма(изм), Пси(п), Ню(п) позволяет оценить эффективность управления ТК после перехода
 // РТС "КУРС" в режим причаливания. Если по истечении 5 минут после формирования режима причаливания в аппаратуре
 // "КУРС" "актива" транспортный корабль не завершил облет по углам КУРС (cw_a29[5]=0 "Облет по углам КУРС закончен"),
 // то есть незавершен выбор Гамма(изм), и углов пеленга Пси и Ню, то формируем ТА Курс 06 "Отказ режима причаливания"
 // По ТА 06 на работающий комплект КУРСа выставляются "Запреты формирования режима причаливания"(cw_a30[9]=1 для КУРС1
 // или cw_a30[14]=1 для Курс2), поскольку дальнейшее использование значений углов Гамма, Пси, Ню, измеряемых
 // этим комплектом "КУРС", для организации управления ТК в автоматическом режиме не имеет смысла.
 // Контроль углов не производится при любом из следующих условий:
 //	БЦВК в индикаторном режиме;
 //	Включена РО ДК;
 //     Включена РУД
 //     Введен признак А22(1)=1 "Запрет контроля ориентации";
 //     Введен признак А30(0)=1 "Запрет автоматического контроля СБ".
}
